import HeaderDropdown from './HeaderDropdown';
import '../assets/css/global.css'
import '../assets/css/AppHeader.css';
import {Link, useLocation, useNavigate} from 'react-router-dom';
import {useContext} from "react";
import {CartStore} from "../contexts/CartContext";

function AppHeader() {
    const {cart} = useContext(CartStore);
    const cartQuantity = cart.reduce((total, item) => total + item.quantity, 0);
    let location = useLocation();
    const navigate = useNavigate();
    const currentLocation = location.pathname;
    return (

        <header className="header-container">
            <section className="bookstore-logo">
                <Link to="/">
                    <img
                        src={require('../assets/images/site/bookstore-logo.png')}
                        alt="Another Bookstore Logo"
                        className="logo-style"
                    />
                </Link>
                <div>
                    <Link to="/">
                        <svg width="98" height="25" viewBox="0 0 98 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M5.072 2.952C4.608 2.952 4.28 2.96 4.088 2.976C4.152 3.104 4.184 3.24 4.184 3.384C4.184 3.528 4.152 4.096 4.088 5.088C4.024 6.08 3.984 7.192 3.968 8.424C5.088 7.656 6.232 7.272 7.4 7.272C7.88 6.872 8.12 6.296 8.12 5.544C8.12 4.792 7.848 4.176 7.304 3.696C6.776 3.2 6.032 2.952 5.072 2.952ZM3.176 1.44L5.528 1.296C6.792 1.296 7.824 1.664 8.624 2.4C9.424 3.12 9.824 3.952 9.824 4.896C9.824 5.312 9.704 5.76 9.464 6.24C9.224 6.704 8.912 7.104 8.528 7.44C9.856 7.808 10.864 8.464 11.552 9.408C12.256 10.352 12.608 11.376 12.608 12.48C12.608 13.968 12.024 15.288 10.856 16.44C9.688 17.576 8.192 18.144 6.368 18.144H1.424C1.168 18.144 0.936 18.064 0.728 17.904C0.536 17.728 0.44 17.504 0.44 17.232C0.44 16.96 0.536 16.744 0.728 16.584C0.936 16.408 1.168 16.32 1.424 16.32H1.88C2.024 14.896 2.096 13.208 2.096 11.256C2.096 9.288 2.056 7.536 1.976 6C1.912 4.464 1.88 3.616 1.88 3.456C1.88 3.28 1.896 3.16 1.928 3.096H1.424C1.168 3.096 0.936 3.016 0.728 2.856C0.536 2.68 0.44 2.464 0.44 2.208C0.44 1.936 0.536 1.72 0.728 1.56C0.936 1.384 1.168 1.296 1.424 1.296L3.176 1.44ZM4.184 16.416C5.24 16.64 6.2 16.752 7.064 16.752C7.944 16.752 8.736 16.416 9.44 15.744C10.16 15.056 10.52 14.088 10.52 12.84C10.52 11.592 10.144 10.632 9.392 9.96C8.64 9.288 7.72 8.952 6.632 8.952C5.56 8.952 4.672 9.168 3.968 9.6C3.968 10.544 4.04 12.816 4.184 16.416ZM16.9244 10.008C16.2204 10.712 15.8684 11.576 15.8684 12.6C15.8684 13.624 16.2204 14.496 16.9244 15.216C17.6444 15.92 18.5084 16.272 19.5164 16.272C20.5404 16.272 21.3964 15.92 22.0844 15.216C22.7724 14.496 23.1164 13.624 23.1164 12.6C23.1164 11.576 22.7724 10.712 22.0844 10.008C21.3964 9.304 20.5404 8.952 19.5164 8.952C18.5084 8.952 17.6444 9.304 16.9244 10.008ZM17.8844 18.144C16.8604 18.144 16.0044 17.744 15.3164 16.944C14.6284 16.144 14.2844 15.144 14.2844 13.944C14.2844 12.728 14.6604 11.56 15.4124 10.44C16.1644 9.304 17.0444 8.456 18.0524 7.896C19.0604 7.336 20.0764 7.056 21.1004 7.056C22.1244 7.056 22.9804 7.456 23.6684 8.256C24.3564 9.056 24.7004 10.064 24.7004 11.28C24.7004 12.48 24.3244 13.648 23.5724 14.784C22.8204 15.904 21.9404 16.744 20.9324 17.304C19.9244 17.864 18.9084 18.144 17.8844 18.144ZM28.7494 10.008C28.0454 10.712 27.6934 11.576 27.6934 12.6C27.6934 13.624 28.0454 14.496 28.7494 15.216C29.4694 15.92 30.3334 16.272 31.3414 16.272C32.3654 16.272 33.2214 15.92 33.9094 15.216C34.5974 14.496 34.9414 13.624 34.9414 12.6C34.9414 11.576 34.5974 10.712 33.9094 10.008C33.2214 9.304 32.3654 8.952 31.3414 8.952C30.3334 8.952 29.4694 9.304 28.7494 10.008ZM29.7094 18.144C28.6854 18.144 27.8294 17.744 27.1414 16.944C26.4534 16.144 26.1094 15.144 26.1094 13.944C26.1094 12.728 26.4854 11.56 27.2374 10.44C27.9894 9.304 28.8694 8.456 29.8774 7.896C30.8854 7.336 31.9014 7.056 32.9254 7.056C33.9494 7.056 34.8054 7.456 35.4934 8.256C36.1814 9.056 36.5254 10.064 36.5254 11.28C36.5254 12.48 36.1494 13.648 35.3974 14.784C34.6454 15.904 33.7654 16.744 32.7574 17.304C31.7494 17.864 30.7334 18.144 29.7094 18.144ZM40.9104 1.152L40.6944 8.88V10.344C41.3664 9.352 42.2224 8.56 43.2624 7.968C44.3024 7.36 45.2144 7.056 45.9984 7.056C47.4704 7.056 48.2064 7.48 48.2064 8.328C48.2064 8.68 48.0944 8.968 47.8704 9.192C47.6624 9.4 47.4464 9.504 47.2224 9.504C47.0144 9.504 46.6624 9.408 46.1664 9.216C45.6704 9.024 45.1824 8.928 44.7024 8.928C43.4064 8.928 42.4064 9.464 41.7024 10.536C43.2864 12.056 44.8224 13.376 46.3104 14.496C47.5424 15.424 48.2544 16.024 48.4464 16.296C48.6384 16.568 48.7344 16.848 48.7344 17.136C48.7344 17.424 48.6384 17.664 48.4464 17.856C48.2544 18.048 47.9984 18.144 47.6784 18.144C47.3744 18.144 47.0224 17.976 46.6224 17.64C46.2384 17.288 45.5024 16.592 44.4144 15.552C43.3264 14.496 42.1104 13.432 40.7664 12.36C40.8624 14.376 40.9104 15.92 40.9104 16.992C40.9104 17.328 40.8144 17.608 40.6224 17.832C40.4304 18.04 40.1824 18.144 39.8784 18.144C39.5744 18.144 39.3104 18.04 39.0864 17.832C38.8784 17.608 38.7744 17.248 38.7744 16.752C38.7744 16.256 38.8144 15.08 38.8944 13.224C38.9744 11.352 39.0144 9.904 39.0144 8.88C39.0144 7.856 38.9744 6.48 38.8944 4.752C38.8144 3.024 38.7744 1.912 38.7744 1.416C38.7744 0.919999 38.8784 0.559999 39.0864 0.335999C39.3104 0.111999 39.5744 -1.43051e-06 39.8784 -1.43051e-06C40.1824 -1.43051e-06 40.4304 0.111999 40.6224 0.335999C40.8144 0.543999 40.9104 0.815999 40.9104 1.152ZM52.6572 18.144C52.0652 18.144 51.5852 18.024 51.2172 17.784C50.8492 17.544 50.6652 17.248 50.6652 16.896C50.6652 16.528 50.7692 16.24 50.9772 16.032C51.2012 15.808 51.4172 15.696 51.6252 15.696C51.8492 15.696 52.2092 15.792 52.7052 15.984C53.2012 16.176 53.7132 16.272 54.2412 16.272C54.7852 16.272 55.3292 16.136 55.8732 15.864C56.4172 15.576 56.6892 15.232 56.6892 14.832C56.6892 14.416 56.4812 14.096 56.0652 13.872C55.6652 13.648 55.1772 13.472 54.6012 13.344C54.0252 13.2 53.4492 13.04 52.8732 12.864C52.2972 12.688 51.8012 12.424 51.3852 12.072C50.9852 11.704 50.7852 11.256 50.7852 10.728C50.7852 9.864 51.3372 9.04 52.4412 8.256C53.5452 7.456 54.7612 7.056 56.0892 7.056C56.7292 7.056 57.2172 7.176 57.5532 7.416C57.9052 7.64 58.0812 7.936 58.0812 8.304C58.0812 8.672 57.9692 8.968 57.7452 9.192C57.5372 9.4 57.3212 9.504 57.0972 9.504C56.8892 9.504 56.5372 9.408 56.0412 9.216C55.5452 9.024 55.0252 8.928 54.4812 8.928C53.9532 8.928 53.4892 9.04 53.0892 9.264C52.7052 9.488 52.5132 9.76 52.5132 10.08C52.5132 10.4 52.8172 10.68 53.4252 10.92C54.0492 11.16 54.7292 11.352 55.4652 11.496C56.2012 11.64 56.8732 11.928 57.4812 12.36C58.1052 12.776 58.4172 13.32 58.4172 13.992C58.4172 15.032 57.8092 15.984 56.5932 16.848C55.3772 17.712 54.0652 18.144 52.6572 18.144ZM65.9314 2.952C65.4674 2.952 65.1394 2.96 64.9474 2.976C65.0114 3.104 65.0434 3.24 65.0434 3.384C65.0434 3.528 65.0114 4.096 64.9474 5.088C64.8834 6.08 64.8434 7.192 64.8274 8.424C65.9474 7.656 67.0914 7.272 68.2594 7.272C68.7394 6.872 68.9794 6.296 68.9794 5.544C68.9794 4.792 68.7074 4.176 68.1634 3.696C67.6354 3.2 66.8914 2.952 65.9314 2.952ZM64.0354 1.44L66.3874 1.296C67.6514 1.296 68.6834 1.664 69.4834 2.4C70.2834 3.12 70.6834 3.952 70.6834 4.896C70.6834 5.312 70.5634 5.76 70.3234 6.24C70.0834 6.704 69.7714 7.104 69.3874 7.44C70.7154 7.808 71.7234 8.464 72.4114 9.408C73.1154 10.352 73.4674 11.376 73.4674 12.48C73.4674 13.968 72.8834 15.288 71.7154 16.44C70.5474 17.576 69.0514 18.144 67.2274 18.144H62.2834C62.0274 18.144 61.7954 18.064 61.5874 17.904C61.3954 17.728 61.2994 17.504 61.2994 17.232C61.2994 16.96 61.3954 16.744 61.5874 16.584C61.7954 16.408 62.0274 16.32 62.2834 16.32H62.7394C62.8834 14.896 62.9554 13.208 62.9554 11.256C62.9554 9.288 62.9154 7.536 62.8354 6C62.7714 4.464 62.7394 3.616 62.7394 3.456C62.7394 3.28 62.7554 3.16 62.7874 3.096H62.2834C62.0274 3.096 61.7954 3.016 61.5874 2.856C61.3954 2.68 61.2994 2.464 61.2994 2.208C61.2994 1.936 61.3954 1.72 61.5874 1.56C61.7954 1.384 62.0274 1.296 62.2834 1.296L64.0354 1.44ZM65.0434 16.416C66.0994 16.64 67.0594 16.752 67.9234 16.752C68.8034 16.752 69.5954 16.416 70.2994 15.744C71.0194 15.056 71.3794 14.088 71.3794 12.84C71.3794 11.592 71.0034 10.632 70.2514 9.96C69.4994 9.288 68.5794 8.952 67.4914 8.952C66.4194 8.952 65.5314 9.168 64.8274 9.6C64.8274 10.544 64.8994 12.816 65.0434 16.416ZM82.9197 13.896L82.6797 8.496C82.6797 8.064 82.7837 7.72 82.9917 7.464C83.2157 7.192 83.4797 7.056 83.7837 7.056C84.0877 7.056 84.3357 7.184 84.5277 7.44C84.7197 7.68 84.8157 8.016 84.8157 8.448C84.8157 8.864 84.7677 9.456 84.6717 10.224C84.4797 11.76 84.3837 13.136 84.3837 14.352C84.3837 14.832 84.5357 15.296 84.8397 15.744C85.1597 16.176 85.3197 16.568 85.3197 16.92C85.3197 17.272 85.1997 17.568 84.9597 17.808C84.7197 18.032 84.4477 18.144 84.1437 18.144C83.3437 18.144 82.9437 17.512 82.9437 16.248C82.1917 17.512 81.2477 18.144 80.1117 18.144C79.1997 18.144 78.4717 17.816 77.9277 17.16C77.3997 16.504 77.0317 15.704 76.8237 14.76L75.9117 10.632C75.8157 10.168 75.5997 9.76 75.2637 9.408C74.9437 9.04 74.7837 8.672 74.7837 8.304C74.7837 7.936 74.9117 7.64 75.1677 7.416C75.4237 7.176 75.7277 7.056 76.0797 7.056C76.8797 7.056 77.3997 7.688 77.6397 8.952L78.5517 13.968C78.8557 15.568 79.6157 16.368 80.8317 16.368C81.4237 16.368 81.9117 16.136 82.2957 15.672C82.6797 15.192 82.8877 14.6 82.9197 13.896ZM96.8243 14.952L96.7763 18.312C96.7763 19.88 96.0883 21.376 94.7123 22.8C93.3363 24.24 91.8003 24.96 90.1043 24.96C89.2563 24.96 88.5203 24.72 87.8963 24.24C87.2723 23.76 86.9603 23.24 86.9603 22.68C86.9603 22.392 87.0563 22.136 87.2483 21.912C87.4563 21.688 87.6963 21.576 87.9683 21.576C88.2563 21.576 88.5123 21.656 88.7363 21.816C88.9763 21.976 89.1923 22.152 89.3843 22.344C89.5923 22.536 89.8963 22.712 90.2963 22.872C90.7123 23.032 91.1763 23.112 91.6883 23.112C92.6963 23.112 93.5603 22.736 94.2803 21.984C95.0003 21.248 95.3603 20.368 95.3603 19.344C95.3603 17.936 95.3523 16.936 95.3363 16.344C94.6003 17.544 93.6803 18.144 92.5763 18.144C91.6643 18.144 90.9363 17.816 90.3923 17.16C89.8643 16.504 89.4963 15.704 89.2883 14.76L88.3763 10.632C88.2803 10.168 88.0643 9.76 87.7283 9.408C87.4083 9.04 87.2483 8.672 87.2483 8.304C87.2483 7.936 87.3763 7.64 87.6323 7.416C87.8883 7.176 88.1683 7.056 88.4723 7.056C88.7763 7.056 89.0243 7.112 89.2163 7.224C89.4083 7.336 89.5683 7.504 89.6963 7.728C89.8723 8.064 90.0083 8.472 90.1043 8.952L91.1603 13.968C91.3363 14.752 91.5683 15.352 91.8563 15.768C92.1603 16.168 92.6243 16.368 93.2483 16.368C93.8723 16.368 94.3683 16.136 94.7363 15.672C95.1203 15.192 95.3123 14.6 95.3123 13.896L95.1443 8.496C95.1443 8.064 95.2483 7.72 95.4563 7.464C95.6803 7.192 95.9443 7.056 96.2483 7.056C96.5523 7.056 96.8003 7.184 96.9923 7.44C97.1843 7.68 97.2803 8.016 97.2803 8.448C97.2803 8.864 97.2323 9.456 97.1363 10.224C96.9283 11.888 96.8243 13.464 96.8243 14.952Z"
                                fill="#3C64B1"/>
                        </svg>
                    </Link>
                </div>
            </section>

            <section className="navbar-container">
                <button className={`home-button ${(currentLocation == '/') ? 'home-button-active' : 'home-button'}`}
                        onClick={() => {
                            navigate('/')
                        }}>Home
                </button>
                <div className="header-dropdown">
                    <HeaderDropdown/>
                </div>
            </section>

            <section className="header-dropdown-and-cart">
                <div className="title-and-search-bar">
                    <form action="category.html">
                        <label>
                            <input type="text" className="search-bar" placeholder="Search"/>
                        </label>
                    </form>
                </div>
                {currentLocation == '/' ? <>
                    <button className="login-button">Log In</button>
                    <Link to="/cart">
                        <div>
                            <button className="cart-button">
                                <svg width="22" height="22" viewBox="0 0 22 22" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M17.4166 17.5C16.2141 17.5 15.25 18.4642 15.25 19.6667C15.25 20.2413 15.4783 20.7924 15.8846 21.1987C16.2909 21.6051 16.842 21.8333 17.4166 21.8333C17.9913 21.8333 18.5424 21.6051 18.9487 21.1987C19.355 20.7924 19.5833 20.2413 19.5833 19.6667C19.5833 18.4642 18.6083 17.5 17.4166 17.5ZM0.083313 0.166672V2.33334H2.24998L6.14998 10.5558L4.67665 13.21C4.51415 13.5133 4.41665 13.8708 4.41665 14.25C4.41665 14.8246 4.64492 15.3757 5.05125 15.7821C5.45758 16.1884 6.00868 16.4167 6.58331 16.4167H19.5833V14.25H7.03831C6.96648 14.25 6.8976 14.2215 6.8468 14.1707C6.79601 14.1199 6.76748 14.051 6.76748 13.9792C6.76748 13.925 6.77831 13.8817 6.79998 13.8492L7.77498 12.0833H15.8458C16.6583 12.0833 17.3733 11.6283 17.7416 10.9675L21.62 3.95834C21.6958 3.785 21.75 3.60084 21.75 3.41667C21.75 3.12935 21.6358 2.8538 21.4327 2.65064C21.2295 2.44747 20.954 2.33334 20.6666 2.33334H4.64415L3.62581 0.166672M6.58331 17.5C5.38081 17.5 4.41665 18.4642 4.41665 19.6667C4.41665 20.2413 4.64492 20.7924 5.05125 21.1987C5.45758 21.6051 6.00868 21.8333 6.58331 21.8333C7.15795 21.8333 7.70905 21.6051 8.11538 21.1987C8.52171 20.7924 8.74998 20.2413 8.74998 19.6667C8.74998 18.4642 7.77498 17.5 6.58331 17.5Z"
                                        fill="#373F41"/>
                                </svg>
                                <div className="cart-items"><label className="cart-label">{cartQuantity}</label></div>
                            </button>
                        </div>
                    </Link>
                </> : <>
                    <div className="avatar">
                        <img src={require('../assets/images/site/avatar.png')} alt="Books"/><label
                        className="avatar-name">Joblin K J</label>
                    </div>
                    <Link to="/cart">
                            <button className="cart-button">
                                <svg width="22" height="22" viewBox="0 0 22 22" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M17.4166 17.5C16.2141 17.5 15.25 18.4642 15.25 19.6667C15.25 20.2413 15.4783 20.7924 15.8846 21.1987C16.2909 21.6051 16.842 21.8333 17.4166 21.8333C17.9913 21.8333 18.5424 21.6051 18.9487 21.1987C19.355 20.7924 19.5833 20.2413 19.5833 19.6667C19.5833 18.4642 18.6083 17.5 17.4166 17.5ZM0.083313 0.166672V2.33334H2.24998L6.14998 10.5558L4.67665 13.21C4.51415 13.5133 4.41665 13.8708 4.41665 14.25C4.41665 14.8246 4.64492 15.3757 5.05125 15.7821C5.45758 16.1884 6.00868 16.4167 6.58331 16.4167H19.5833V14.25H7.03831C6.96648 14.25 6.8976 14.2215 6.8468 14.1707C6.79601 14.1199 6.76748 14.051 6.76748 13.9792C6.76748 13.925 6.77831 13.8817 6.79998 13.8492L7.77498 12.0833H15.8458C16.6583 12.0833 17.3733 11.6283 17.7416 10.9675L21.62 3.95834C21.6958 3.785 21.75 3.60084 21.75 3.41667C21.75 3.12935 21.6358 2.8538 21.4327 2.65064C21.2295 2.44747 20.954 2.33334 20.6666 2.33334H4.64415L3.62581 0.166672M6.58331 17.5C5.38081 17.5 4.41665 18.4642 4.41665 19.6667C4.41665 20.2413 4.64492 20.7924 5.05125 21.1987C5.45758 21.6051 6.00868 21.8333 6.58331 21.8333C7.15795 21.8333 7.70905 21.6051 8.11538 21.1987C8.52171 20.7924 8.74998 20.2413 8.74998 19.6667C8.74998 18.4642 7.77498 17.5 6.58331 17.5Z"
                                        fill="#373F41"/>
                                </svg>
                                <div className="cart-items"><label className="cart-label">{cartQuantity}</label></div>
                            </button>
                    </Link></>}

            </section>
        </header>
    )
}

export default AppHeader;

